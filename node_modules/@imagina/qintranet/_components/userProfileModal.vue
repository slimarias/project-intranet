<template>
	<q-dialog v-model="openUserModel"  transition-show="flip-down" transition-hide="flip-up">
		<q-card >
			<q-toolbar class="bg-primary q-pa-md">
				<q-toolbar-title>
					<div class="user-name text-capitalize flex items-center text-bold text-white q-pt-xl q-px-sm q-pb-sm">
						{{user.fullName}}
					</div>
				</q-toolbar-title>
				<q-avatar size="150px" style="margin-bottom: -100px">
					<q-img :src="user.mainImage" />
				</q-avatar>
				<q-btn size="xs" dense rounded icon="close" v-close-popup color="primary" style="top: 10px;right: 10px;position: absolute" />
			</q-toolbar>
			<q-card-section>
				<div class="container">
					<div class="user-info q-mx-lg q-my-lg">
						<q-list dense>
							<q-item v-ripple  v-if="user.contacts.value.length">
								<q-item-section avatar>
									<q-icon color="primary" name="fas fa-phone" size="xs"/>
								</q-item-section>
								<q-item-section>
									<div class="text-body2 text-primary">
										{{ $tr('ui.form.phone') }}:
									</div>
									<div v-for="(contact, key) in user.contacts.value" :key="key" class="text-caption">
										{{contact.phone}}
									</div>
								</q-item-section>
							</q-item>
							<q-item v-ripple v-if="user.fields.cellularPhone.value !== null">
								<q-item-section avatar>
									<q-icon color="primary" name="fab fa-whatsapp"  size="xs"/>
								</q-item-section>
								<q-item-section>
									<div class="text-body2 text-primary">
										Celular:
									</div>
									<div class="text-caption">
										{{user.fields.cellularPhone.value}}
									</div>
								</q-item-section>
							</q-item>
							<q-item v-ripple v-if="user.addresses.length">
								<q-item-section avatar>
									<q-icon color="primary" name="place" size="xs" />
								</q-item-section>
								<q-item-section>
									<div class="text-body2 text-primary">
										{{ $tr('ui.form.address') }}:
									</div>
									<div v-for="(address, key) in user.addresses" :key="key" class="text-caption">
										{{address.address1}} {{address.city}} {{address.state}}
									</div>
								</q-item-section>
							</q-item>
							<q-item v-ripple>
								<q-item-section avatar>
									<q-icon color="primary" name="email"  size="xs"/>
								</q-item-section>
								<q-item-section>
									<div class="text-body2 text-primary">
										{{ $tr('ui.form.email') }}:
									</div>
									<div class="text-caption">
										{{user.email}}
									</div>
								</q-item-section>
							</q-item>
						</q-list>
					</div>
				</div>
			</q-card-section>
		</q-card>
	</q-dialog>
</template>

<script>
  export default {
    name: "userProfileModal",
	  props:{
		  user: {
			type: Object,
			  required: true
		  },
		  label:{
			type: String,
			default: 'Ver Perfil'
		  },
		  value:{
		  	default: false
		  }
	  },
	  watch:{
    	value(newValue){
    		this.openUserModel = newValue
		},
		openUserModel(newValue) {
			this.$emit('input', this.openUserModel)
		},
	  },
	  data(){
      	return {
        	openUserModel: false
      	}
	  }
  }
</script>

<style scoped>
	.container{
		display: grid;
		grid-template-columns: repeat(2, 200px);
		/*grid-template-rows: repeat(2, 1fr);*/
	}
	.user-image{
		grid-column-end: span 1;
	}
	.user-name{
		/*grid-column-end: span 1;*/
	}
	.user-info{
		grid-column-end: span 2;
		grid-row-end: span 1;
	}
	@media screen and (max-width: 768px) {
		.container{
			display: grid;
			grid-template-columns: 1fr;
			grid-template-rows: 1fr;
		}
		.user-name{
			margin-top: 15px;
			justify-content: center;
		}
		.user-info{
			grid-column-end: span 1;
			grid-row-end: span 1;
		}
	}
</style>