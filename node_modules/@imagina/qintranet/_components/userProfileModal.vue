<template>
	<div>
		<q-btn
			dense
			rounded
			flat
			color="primary"
			@click="openUserModel = !openUserModel"
			outline no-caps class="q-px-sm">
			<q-icon color="primary" name="person" size="xs" />
			{{label}}
		</q-btn>
		<q-dialog v-model="openUserModel"  transition-show="flip-down" transition-hide="flip-up">
			<q-card >
				<q-toolbar class="bg-primary">
					<div class="row">
						<div class="user-name text-capitalize flex items-center text-bold text-white q-pt-xl q-px-sm q-pb-sm col-8">
							{{user.fullName}}
						</div>
						<div class="col-4">
								<q-avatar size="150px">
									<q-img :src="user.mainImage" />
								</q-avatar>
							<q-btn size="xs" dense rounded icon="close" v-close-popup color="primary" class="float-right" />
						</div>
					</div>
				</q-toolbar>
				<q-card-section>
					<div class="container">
						<div class="user-info q-mx-lg q-my-lg">
							<q-list dense>
								<q-item v-ripple  v-if="user.contacts.value.length">
									<q-item-section avatar>
										<q-icon color="primary" name="fas fa-phone" size="xs"/>
									</q-item-section>
									<q-item-section>
										<div v-for="(contact, key) in user.contacts.value" :key="key" class="text-caption">
											{{contact.phone}}
										</div>
									</q-item-section>
								</q-item>
								<q-item v-ripple>
									<q-item-section avatar>
										<q-icon color="primary" name="email"  size="xs"/>
									</q-item-section>
									<q-item-section>
										<div class="text-caption">
											{{user.email}}
										</div>
									</q-item-section>
								</q-item>
								<q-item v-ripple v-if="user.addresses.length">
									<q-item-section avatar>
										<q-icon color="primary" name="place" size="xs" />
									</q-item-section>
									<q-item-section>
										<div v-for="(address, key) in user.addresses" :key="key" class="text-caption">
											{{address.address1}} {{address.city}} {{address.state}}
										</div>
									</q-item-section>
								</q-item>
							</q-list>
						</div>
					</div>
				</q-card-section>
			</q-card>
		</q-dialog>
	</div>
</template>

<script>
  export default {
    name: "userProfileModal",
	  props:{
      user: {
        type: Object,
	      required: true
      },
		  label:{
        type: Object,
        default: 'Ver Perfil'
		  }
	  },
	  data(){
      return {
        openUserModel: false
      }
	  }
  }
</script>

<style scoped>
	.container{
		display: grid;
		grid-template-columns: repeat(2, 200px);
		/*grid-template-rows: repeat(2, 1fr);*/
	}
	.user-image{
		grid-column-end: span 1;
	}
	.user-name{
		/*grid-column-end: span 1;*/
	}
	.user-info{
		grid-column-end: span 2;
		grid-row-end: span 1;
	}
	@media screen and (max-width: 768px) {
		.container{
			display: grid;
			grid-template-columns: 1fr;
			grid-template-rows: 1fr;
		}
		.user-name{
			margin-top: 15px;
			justify-content: center;
		}
		.user-info{
			grid-column-end: span 1;
			grid-row-end: span 1;
		}
	}
</style>